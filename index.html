<!DOCTYPE html>
<html>
<head>
	<title>Aplikasi Daftar Mahasiswa</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta charset="UTF-8"> 
	<link rel="stylesheet" href="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.css" />
	<script src="http://code.jquery.com/jquery-1.11.1.js"></script>
	<script src="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>
	<script type="text/javascript">
		var dataObject = [{ "nim": "125060400111044", "nama": "Isyana Sarasvati", "jurusan": "Teknik Informatika", "fakultas": "Filkom", "alamat": "Jl. Suka Nyanyi", "noHP": "081234567890"},
				{ "nim": "135060401111005", "nama": "Marion Jola", "jurusan": "komunikasi", "fakultas": "FISIP", "alamat": "Kec. Wakanda", "noHP": "08765432109" },
				{ "nim": "165150201111050", "nama": "Santi Yunika Sufiana", "jurusan": "Teknik Informatika", "fakultas": "FILKOM", "alamat": "Jl. Suhat", "noHP": "081246015751"}];
var Application ={
	initApplication : function(){
		$(window).load('pageinit', '#page-one', function(){
			Application.initShowMhs();
		})
		$(document).on('click', '#detail-mhs', function(){
			var nim = $(this).data('nimmhs');
			Application.initShowDetailMhs(nim);
		})
	},
	initShowMhs : function(){
		for (let index = 0; index < dataObject.length; index++) {
			var appendList = '<li><a href="#page-two?id=' + dataObject[index].nim +'" target="_self" id="detail-mhs" data-nimmhs="' + dataObject[index].nim +'"><h2>' +dataObject[index].nama + '</h2><p>' + dataObject[index].nim +'</p><p><b>' + dataObject[index].fakultas + '</b></p></a></li>';
			$('#list-mhs').append(appendList);
			$('#list-mhs').listview('refresh');
		};	
	},
	initShowDetailMhs : function(nim){
	    var tbdy = $("#table-detailMhs tbody");
		if (tbdy.children().length > 0) tbdy.empty();
			for (let index = 0; index < dataObject.length; index++) {
			var appendDetail = "";
				if (dataObject[index].nim == nim) {
					appendDetail = '<tr><td>' + dataObject[index].nim + '</td><td>' + dataObject[index].nama +'</td><td>' + dataObject[index].jurusan + '</td><td>' + dataObject[index].fakultas + '</td><td>'+ dataObject[index].alamat + '</td><td>' + dataObject[index].noHP + '</td></tr>';
				}
				$('#table-detailMhs').append(appendDetail);
			}
			$("#table-detailMhs").table("refresh");
		}
	};

	</script>>
</head>
<body>
	<div data-role="page" id="page-one">
		<div data-role="header">
			<h1>Daftar Mahasiswa</h1>
		</div>
		<div role="main" class="ui-content">
			<ul id="list-mhs" data-role="listview" data insert="true" data-filter="true">
			</ul>
		</div>
	</div>
	<div data-role="page" id="page-two" data-theme="b">
		<div data-role="header">
			<h1>Detail Mahasiswa</h1>
		</div>
		<div role="main" class="ui-content">
			<table data-role="table" data-model="reflow" class="ui-responsive" id="table-detailMhs">
				<thead>
					<tr>
						<th data-priority="1">NIM</th>
						<th data-priority="2">Nama</th>
						<th data-priority="3">Jurusan</th>
						<th data-priority="4">Fakultas</th>
						<th data-priority="5">Alamat</th>
						<th data-priority="6">No HP</th>
					</tr>
				</thead>
				<tbody>
				</tbody>
			</table>
		</div>
	</div>
	<script src="js/app.js" type="text/javascript">
	</script>
	<script>Application.initApplication();</script>
	<script>
		$(document).ready(function() {
			$("#responsecontainer").load("js/app.js");
			var refreshId = setInterval(function(){
				$("#responsecontainer").load('js/app.js?randval='+ Math.random());
			}, 1000);
		});
	</script>
</body>
</html>
